<% installed_software.each do |software| %>
  <% row_class =
       if software.finish_date.present?
         if software.finish_date < Date.current
           "table-danger" # Просрочено
         elsif software.finish_date <= Date.current + 3.months
           "table-warning" # Истекает в течение 3 месяцев
         end
       end
  %>

  <tr class="<%= row_class %>">
    <td><%= software.name %></td>
    <td class="text-center"><%= software.version %></td>
    <td class="text-center">
      <% if software.start_date && software.finish_date %>
        <%= software.start_date.strftime('%d.%m.%Y') %> — <%= software.finish_date.strftime('%d.%m.%Y') %>
      <% else %>
        <em>Без срока</em>
      <% end %>
    </td>
    <td>
      <% if software.comp_classes.any? %>
        <% software.comp_classes.each do |aud| %>
          <span class="badge bg-success"><%= aud.aud_number %></span>
        <% end %>
      <% else %>
        <em>Не установлено</em>
      <% end %>
    </td>
    <td class="text-end">
      <div class="d-inline-flex gap-2">
        <%= link_to software, class: 'text-decoration-none text-primary', title: 'Просмотр', data: { bs_toggle: "tooltip" } do %>
          <i class="bi bi-eye"></i>
        <% end %>

        <%= link_to edit_installed_software_path(software), class: 'text-decoration-none text-secondary', title: 'Редактировать', data: { bs_toggle: "tooltip" } do %>
          <i class="bi bi-pencil"></i>
        <% end %>

        <%= link_to installed_software_path(software), method: :delete,
                    data: { confirm: 'Вы уверены?', bs_toggle: "tooltip" },
                    class: 'text-decoration-none text-danger', title: 'Удалить' do %>
          <i class="bi bi-trash"></i>
        <% end %>
      </div>
    </td>

  </tr>
<% end %>
